(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{187:function(e,t,n){e.exports=n(451)},192:function(e,t,n){},451:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(176),i=n.n(r),l=(n(192),n(22)),s=n(23),c=n(25),u=n(24),d=n(26),h=(n(90),n(14)),m=n(186),p=n(52),f=n(177),g=n.n(f);function b(e,t,n){try{p.mermaidAPI.initialize({startOnLoad:!0}),p.mermaidAPI.parseError=function(e,t){},p.mermaidAPI.render(e,t,function(e){n({diagram:e,input:t})})}catch(a){console.log("Failed to generate diagram"),console.log(a)}}var x=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={diagram:{__html:""}},n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;b(this.props.title,this.props.diagram,function(t){var n=t.diagram,a=t.input;e.setState({diagram:{__html:n},input:a})})}},{key:"shouldComponentUpdate",value:function(e,t){var n=this;return e.diagram!==this.props.diagram?(b(this.props.title,e.diagram,function(e){var t=e.diagram,a=e.input;n.setState({diagram:{__html:t},input:a})}),!1):t.diagram!==this.state.diagram}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:function(){var e=new Blob([document.getElementsByClassName("mermaid-code-to-graph")[0].innerHTML],{type:"image/svg+xml;charset=utf-8"});g.a.saveAs(e,"graph.svg")},style:{color:"white",borderRadius:"0",border:"none",outline:"none",backgroundColor:"#FF44FF",flexBasis:"30px",flexShrink:0,flexGrow:1,width:"100%",minHeight:"30px",zIndex:1}},"loading"!==this.state.status?"Download SVG File":"Download SVG File!"),o.a.createElement("div",{dangerouslySetInnerHTML:this.state.diagram,className:"mermaid-code-to-graph",style:Object(m.a)({display:"flex",alignItems:"center",justifyContent:"center"},this.props.style)}))}}]),t}(o.a.Component);x.defaultProps={title:"diagram",frameBorder:0};var v=x,y=n(178),w=n.n(y),S=n(179),k=n(180),O=n.n(k),j=(n(87),n(53)),C=n.n(j),E=n(185),B=(n(440),n(442),n(443),n(444),n(445),n(446),n(88)),F=n(182),D=n.n(F),I=function(e){var t=e.location;try{var n=t.search,a=D.a.parse(n).code;return{code:B.Base64.decode(a)}}catch(o){return console.log("Using default code"),{code:'const myFunction = (x) => {\n  if(x>0){\n    return "ok"\n  } else {\n    throw "not ok"\n  }\n}'}}},G=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).onDrop=function(e,t){e.forEach(function(e){var t=new FileReader;t.onload=function(){var e=t.result;n.handleChange(e)},t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.readAsBinaryString(e)})},n.state={source:"graph TB; Init;",error:null,status:"init"},n.handleChange=n.handleChange.bind(Object(h.a)(Object(h.a)(n))),n.handleSubmitDirect=n.handleSubmitDirect.bind(Object(h.a)(Object(h.a)(n))),n.handleSubmit=w()(200,n.handleSubmitDirect).bind(Object(h.a)(Object(h.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=B.Base64.encodeURI(e);this.props.history.push("./?code=".concat(t)),this.handleSubmit()}},{key:"handleSubmitDirect",value:function(){var e=this;setTimeout(function(){var t=I({location:e.props.location}).code;e.setState({source:"graph TB; Loading;",status:"loading"},function(){setTimeout(function(){try{var n=Object(S.transformJsStringToMermaidString)(t);e.setState({source:n,status:"loaded",error:null})}catch(a){e.setState({status:"error",error:a})}},0)})},0)}},{key:"componentDidMount",value:function(){var e=I({location:this.props.location}).code;this.handleChange(e)}},{key:"render",value:function(){var e=this,t=I({location:this.props.location}).code;return o.a.createElement(E.a,{onDrop:this.onDrop},function(n){var a=n.getRootProps,r=n.getInputProps,i=n.isDragActive;return o.a.createElement("div",Object.assign({},a(),{onClick:void 0,style:{display:"flex",flexDirection:"row",height:"100vh",alignItems:"stretch",flexWrap:"wrap"}}),i?o.a.createElement("div",{style:{position:"absolute",color:"white",fontSize:"2em",display:"flex",alignItems:"center",justifyContent:"center",left:0,right:0,top:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",zIndex:99999}},"Drop file anywhere"):null,o.a.createElement("div",{style:{flexBasis:"50%",flexShrink:1,flexGrow:1,height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"stretch"}},o.a.createElement(C.a,{mode:"javascript",theme:"monokai",onChange:e.handleChange,name:"code-ace-editor",editorProps:{$blockScrolling:!0},value:t,style:{flexBasis:"100vh",flexShrink:1,flexGrow:1,width:"100%"},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2}}),o.a.createElement("input",Object.assign({},r(),{style:{color:"white",borderRadius:"0",border:"none",outline:"none",backgroundColor:"#FF44FF",flexBasis:"30px",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1,width:"100%",minHeight:"30px"}}))),o.a.createElement("button",{onClick:e.handleSubmitDirect,style:{position:"relative",fontWeight:600,outline:"none",color:"white",fontSize:"1.2em",borderRadius:"100%",border:"none",backgroundColor:"#FF44FF",width:60,height:60,marginLeft:-30,marginRight:-30,alignSelf:"center",zIndex:9999}},"loading"!==e.state.status?"Go":"Wait"),null===e.state.error||void 0===e.state.error?o.a.createElement("div",{style:{flexBasis:"50%",flexShrink:1,flexGrow:0,height:"100%",display:"flex",flexDirection:"column"}},o.a.createElement(v,{diagram:e.state.source,style:{flexBasis:"80%",flexShrink:1,flexGrow:1}}),o.a.createElement("button",{onClick:function(){O()(e.state.source,{debug:!0,message:"Press #{key} to copy"}),e.setState({status:"copied"})},style:{color:"white",borderRadius:"0",border:"none",outline:"none",backgroundColor:"#FF44FF",flexBasis:"30px",flexShrink:0,flexGrow:1,width:"100%",minHeight:"30px"}},"copied"!==e.state.status?"Copy graph code to clipboard":"Copied!"),o.a.createElement(C.a,{theme:"github",readOnly:!0,name:"result-ace-editor",editorProps:{$blockScrolling:!0},value:e.state.source,style:{flexBasis:"20%",flexShrink:0,flexGrow:0,width:"100%",height:"20%"},setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,showLineNumbers:!1,tabSize:2}})):o.a.createElement("div",{style:{flexBasis:"50%",flexShrink:0,flexGrow:0,height:"100%",display:"flex",flexDirection:"column"}},o.a.createElement(C.a,{theme:"github",readOnly:!0,name:"error-ace-editor",editorProps:{$blockScrolling:!0},value:e.state.error.message,style:{flexBasis:"100%",flexShrink:0,flexGrow:0,width:"100%",height:"100%",color:"red"},setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,showLineNumbers:!1,tabSize:2}})))})}}]),t}(a.Component),A=n(183),z=n.n(A),L=n(453),P=n(454),R=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(z.a,{href:"https://github.com/crubier/code-to-graph",style:{zIndex:20},svgStyle:{zIndex:20}}),o.a.createElement(L.a,null,o.a.createElement(P.a,{component:G})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},90:function(e,t,n){}},[[187,2,1]]]);
//# sourceMappingURL=main.e26852bc.chunk.js.map